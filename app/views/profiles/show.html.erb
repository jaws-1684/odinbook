<% content_for :title do %><%= @profile.full_name %><% end %>
<div class="main h-auto w-6xl grid grid-cols-12 grid-rows-12 mt-16 mb-2">
  <div class="sidebar col-start-1 col-span-2 row-start-1 row-span-full items-start h-auto">
      <%= render partial: "shared/sidebar" %>
  </div>

  <div class="b-center-content col-start-3 col-span-full row-start-1 row-span-full border-gray-400/50 text-sm">
                    
        <div class="profile-info h-86 flex flex-col justify-end bg-[url(https://picsum.photos/1000/300)] rounded-xl">
            <div class="info h-sm w-full h-24 border-1 border-gray-400/50 bg-white rounded-xl text-sm">
                             <div class="b-profile-image relative bottom-20 left-5 z-1 flex">
                                  <%= image_tag @profile.avatar_url, class: "mr-2 rounded-full w-[150px] border-2 border-white"%>
                                 <div class="self-end mb-2 flex justify-between items-start w-180">

                                  <div>
                                    <p class="text-2xl font-semibold"> <%= @profile.full_name %></p>
                                     <p class="text-md"> <%= @profile.email %></p>
                                  </div>
                                     
                                    <% unless @profile == current_user %>
                                        <% if current_user.friends.include? (@profile) %>
                                              <div class="mt-1 p-2 pl-4 pr-4 text-white rounded-sm bg-blue-500 font-semibold text-xs hover:bg-blue-400">Friends</div>
                                         <% elsif current_user.sent_invitations.include? (@profile) %>
                                              <div class="mt-1 p-2 pl-4 pr-4 text-white rounded-sm bg-blue-500 font-semibold text-xs hover:bg-blue-400">Invitation sent</div>
                                           <% else %>    
                                          <%= button_to "Add friend", profile_friend_requests_path(@profile), method: :post, class: "mt-1 p-2 pl-4 pr-4 text-white rounded-sm bg-blue-500 font-semibold cursor-pointer text-xs hover:bg-blue-400" %>
                                          <% end -%>
                                    <% end -%>
                                   </div>
                             </div>


                             
            </div>




        </div>

        

        <div class="posts-ascii-container gap-2 flex mt-4">

                <div class="media-posts-container w-3xl flex flex-col mb-2 gap-2">
                  <div class="images-container w-full min-h-56 border-1 border-gray-400/50 rounded-xl bg-white flex flex-col justify-start items-start p-4">
                    <div class="text-blue-500 p-1 mb-2 bg-[#F2F2F2] hover:bg-gray-200 rounded-md cursor-pointer">
                      photos placeholder icon
                    </div>
                     <div class="images w-full min-h-40 flex gap-2 justify-around items-center">
                      <%= image_tag "https://picsum.photos/400", class:"w-1/3 rounded-sm" %>
                      <%= image_tag "https://picsum.photos/400", class:"w-1/3 rounded-sm" %>
                      <%= image_tag "https://picsum.photos/400", class:"w-1/3 rounded-sm" %>
                     </div>

                     <div class="actions w-full h-[30px] flex gap-2 text-blue-500 text-xs mt-2 font-semibold justify-center">
                      <button class="flex items-center justify-center p-2 bg-[#F2F2F2] hover:bg-gray-200 cursor-pointer rounded-md grow text-center">
                        Implement Upload a photo + icon
                      </button>
                      <a href="#" class="flex items-center justify-center p-2 bg-[#F2F2F2] hover:bg-gray-200 rounded-md grow text-center">
                        Implement Show all + icon
                      </a>
                    </div>


                  </div>
                  
                   
                      <div class="b-create w-full flex justify-center items-center h-sm border-1 border-gray-400/50 bg-white rounded-xl text-sm p-2">

                              <%= turbo_frame_tag "new_post", class: "flex flex-col w-full" do %>
                               <div><%= link_to new_post_path, class: "text-blue-500 font-semibold hover:text-blue-400" do %>
                                   <div class="create-post w-md flex justify-center items-center cursor-pointer ml-12">
                                    <div class="ico">
                                      <svg xmlns="http://www.w3.org/2000/svg" width="25px" height="25" fill="#2c80ff" class="bi bi-plus font-bold" viewBox="0 0 16 16">
                                          <path d="M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4"/>
                                      </svg>
                                    </div>
                                    <p>Create Post</p>
                                  </div>
                                  <% end -%>
                                </div>
                              <% end %>

                    </div>



                    <div class="b-posts w-full h-auto border-1 border-gray-400/50 bg-white rounded-xl text-sm mt-2">
                      <%= turbo_stream_from "posts" %>
                              <div id="posts-container">
                                 <%= render @posts %>
                              </div>

                    </div>
               </div>

                <div class="b-right w-lg h-auto flex flex-col">
                <div class="friends w-full min-h-56 border-1 border-gray-400/50 bg-white rounded-xl p-4">

                  <% unless @profile.friends.any? %>
                    <div class="h-full flex flex-col justify-center items-center text-gray-500 px-4 py-12">
                            <div class="text-center">
                              <p class="text-3xl font-semibold mb-2">No friends</p>
                              <p class="text-base text-gray-400">User currently donâ€™t have any friends</p>
                            </div>
                          </div>
                  <% else %>
                    <%= link_to profile_friend_requests_path(@profile) do %>
                        <p class="text-base font-semibold mb-2 ml-4">Friends&nbsp<span class="text-sm text-gray-500">(<%= @profile.friends.count %>)</span></p>
                    <% end -%>

                        <div class="flex gap-2 flex-wrap">
                          <% @profile.friends.each_with_index do |friend, idx| %>
                          
                            <%= link_to profile_path(friend) do %>
                              <% break if idx >= 8 %>
                              <div class="flex flex-col justify-center items-center gap-1 cursor-pointer hover:bg-gray-200 hover:rounded-sm p-1">
                               <div>
                                 <%= image_tag friend.avatar_url , class: "w-[70px] rounded-full" %>        
                               </div>

                               <div>
                                <p class="text-xs"><%= friend.full_name.split[0] %></p>
                               </div>
                                </div>
                            <% end -%>
                       
                        <% end -%>
                  <% end -%>
                  </div>
                 

                </div>
            </div>
          </div>
          
        </div>
                   
  </div>

  
</div>

       
